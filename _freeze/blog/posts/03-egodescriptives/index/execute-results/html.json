{
  "hash": "a1b0fd69d3f922a05163c8e4dd6c9e2f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Ego-centric Network Analysis\"\nsubtitle: \"Descriptive Statistics and Sociodemographic Distance in ELSOC 2017-2019\"\nauthor: \"Roberto Cantillan\"\ndate: \"2023-08-09\"\ncategories: [R, Networks, \"Ego networks\", Homophily]\nsummary: |\n    This document aims to build a long-format database of egos and their alters (nested) for subsequent analyses using data from ELSOC 2017 (w2) and 2019 (w4). We conclude with descriptive tables and the construction of \"sociodemographic distance\" (mismatch) vectors for key parameters highlighted in Bargsted et al. (2020) for the Chilean case.\nimage: \"featured.jpg\"\ntitle-block-banner: featured.jpg\ntitle-block-banner-color: \"rgba(0,38,66,0.75)\"\ntitle-block-style: default\nexecute:\n  cache: true\n---\n\n## Introduction\n\nThis document provides a detailed analysis of ego-centric networks using data from ELSOC 2017 (w2) and 2019 (w4). We build a database that integrates information about egos (respondents) and their alters (named contacts), and then calculate measures of sociodemographic distance between them.\n\n![Egonetwork](img/egor.png){#fig-id width=80%}\n\n## Environment Setup\n\nWe begin by loading the required libraries. The following code uses `pacman::p_load()`, which installs packages if they are not already available and then loads them. Each package serves a specific purpose:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| label: setup\n#| message: false\n#| warning: false\n\n# Carga directa (rápida)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(sjlabelled)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'sjlabelled'\n\nThe following object is masked from 'package:forcats':\n\n    as_factor\n\nThe following object is masked from 'package:dplyr':\n\n    as_label\n\nThe following object is masked from 'package:ggplot2':\n\n    as_label\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(sjPlot)\nlibrary(texreg)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nVersion:  1.39.4\nDate:     2024-07-23\nAuthor:   Philip Leifeld (University of Manchester)\n\nConsider submitting praise using the praise or praise_interactive functions.\nPlease cite the JSS article in your publications -- see citation(\"texreg\").\n\nAttaching package: 'texreg'\n\nThe following object is masked from 'package:tidyr':\n\n    extract\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(egor)\nlibrary(haven)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'haven'\n\nThe following objects are masked from 'package:sjlabelled':\n\n    as_factor, read_sas, read_spss, read_stata, write_sas, zap_labels\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(car)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: carData\n\nAttaching package: 'car'\n\nThe following object is masked from 'package:dplyr':\n\n    recode\n\nThe following object is masked from 'package:purrr':\n\n    some\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(stargazer)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nPlease cite as: \n\n Hlavac, Marek (2022). stargazer: Well-Formatted Regression and Summary Statistics Tables.\n R package version 5.2.3. https://CRAN.R-project.org/package=stargazer \n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(janitor)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(gridExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'gridExtra'\n\nThe following object is masked from 'package:dplyr':\n\n    combine\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggeffects)\nlibrary(kableExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'kableExtra'\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(questionr)\nlibrary(JWileymisc)\nlibrary(httr)\nlibrary(plotly)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'plotly'\n\nThe following object is masked from 'package:httr':\n\n    config\n\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n\nThe following object is masked from 'package:stats':\n\n    filter\n\nThe following object is masked from 'package:graphics':\n\n    layout\n```\n\n\n:::\n:::\n\n\n## Data Loading\n\nNext, we load the ELSOC datasets. These files contain information from the 2017 and 2019 waves. The .RData format preserves the original data structure, including labels and metadata:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#ELSOC 2017\nurl <- \"https://github.com/rcantillan/ricantillan.rbind.io/raw/main/dat/ELSOC/ELSOC_W02_v3.00_R.RData\"\nresponse <- GET(url)\nlocal_path <- \"ELSOC_W02_v3.00_R.RData\"\nwriteBin(response$content, local_path)\nload(\"ELSOC_W02_v3.00_R.RData\") \n```\n:::\n\n\n## Data Preparation\n\nThis step is essential for network analysis. We use `rename()` to standardize the identifier variable across both datasets. The '.' prefix in `.egoID` follows the conventions of the egor package for identifier variables:\n\n\n::: {.cell}\n\n```{.r .cell-code}\na <- elsoc_2017 %>% rename(.egoID = idencuesta)\n```\n:::\n\n\n### Building the Alters Database\n\nWe now turn to the most complex part: constructing the alters database. For each alter (contact mentioned by the ego), we need to extract multiple characteristics.\n\n### First Alter\n\nThe following code extracts information for the first alter mentioned by each ego. The selected variables capture:\n\n- alter_sexo: Gender of the contact (1 = male, 2 = female)\n- alter_edad: Age in years\n- alter_rel: Type of relationship with the ego (1 = family, 2 = friend, etc.)\n- alter_tiempo: Length of the relationship\n- alter_barrio: Whether the alter lives in the same neighborhood as the ego\n- alter_educ: Educational attainment\n- alter_relig: Religious affiliation\n- alter_ideol: Political orientation\n\n\n::: {.cell}\n\n```{.r .cell-code}\nalter_1 <- a %>%\n        dplyr::select(.egoID, \n                      alter_sexo=r13_sexo_01,     # Recodificamos nombre de variable\n                      alter_edad=r13_edad_01,      # para mantener consistencia\n                      alter_rel=r13_relacion_01,   # Los sufijos _01 indican\n                      alter_tiempo=r13_tiempo_01,  # que corresponden al\n                      alter_barrio=r13_barrio_01,  # primer alter mencionado\n                      alter_educ=r13_educ_01,      \n                      alter_relig=r13_relig_01,    \n                      alter_ideol=r13_ideol_01)\n```\n:::\n\n\n### Remaining Alters\n\nWe repeat the same process for alters 2 through 5. The only difference is the suffix in the original variable names (_02, _03, etc.). The code is repetitive but necessary to keep the data structure clear:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Segundo alter - sufijo _02 en variables originales\nalter_2 <- a %>%\n        dplyr::select(.egoID, \n                      alter_sexo=r13_sexo_02, \n                      alter_edad=r13_edad_02, \n                      alter_rel=r13_relacion_02,\n                      alter_tiempo=r13_tiempo_02,\n                      alter_barrio=r13_barrio_02, \n                      alter_educ=r13_educ_02, \n                      alter_relig=r13_relig_02, \n                      alter_ideol=r13_ideol_02)\n\n# Tercer alter - sufijo _03\nalter_3 <- a %>%\n        dplyr::select(.egoID, \n                      alter_sexo=r13_sexo_03, \n                      alter_edad=r13_edad_03, \n                      alter_rel=r13_relacion_03,\n                      alter_tiempo=r13_tiempo_03,\n                      alter_barrio=r13_barrio_03, \n                      alter_educ=r13_educ_03, \n                      alter_relig=r13_relig_03, \n                      alter_ideol=r13_ideol_03)\n\n# Cuarto alter - sufijo _04\nalter_4 <- a %>%\n        dplyr::select(.egoID, \n                      alter_sexo=r13_sexo_04, \n                      alter_edad=r13_edad_04, \n                      alter_rel=r13_relacion_04,\n                      alter_tiempo=r13_tiempo_04, \n                      alter_barrio=r13_barrio_04, \n                      alter_educ=r13_educ_04, \n                      alter_relig=r13_relig_04, \n                      alter_ideol=r13_ideol_04)\n\n# Quinto alter - sufijo _05\nalter_5 <- a %>%\n        dplyr::select(.egoID, \n                      alter_sexo=r13_sexo_05, \n                      alter_edad=r13_edad_05, \n                      alter_rel=r13_relacion_05,\n                      alter_tiempo=r13_tiempo_05, \n                      alter_barrio=r13_barrio_05, \n                      alter_educ=r13_educ_05, \n                      alter_relig=r13_relig_05, \n                      alter_ideol=r13_ideol_05)\n```\n:::\n\n\n### Identifying Alters\n\nTo preserve the order in which alters are stored, we create a numeric variable that captures the position in which each alter was mentioned. This is crucial for later analyses that consider mention order:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Assign sequential identifier numbers\nalter_1$n <- 1  # First alter mentioned\nalter_2$n <- 2  # Second alter\nalter_3$n <- 3  # Third alter\nalter_4$n <- 4  # Fourth alter\nalter_5$n <- 5  # Fifth alter\n```\n:::\n\n\n### Building the Long-format Dataset\n\nWe then merge all alter information into a single long-format dataset. This step is crucial because it:\n\n1. Enables more efficient analysis\n2. Makes comparisons across alters easier\n3. Is the preferred structure for many network-analysis functions\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Combine all alter datasets\nalteris <- rbind(alter_1, alter_2, alter_3, alter_4, alter_5)\n\n# Order by ego ID to keep the hierarchical structure\nalteris <- arrange(alteris, .egoID)\n\n# Create a unique identifier for each alter\nalteris <- rowid_to_column(alteris, var = \".altID\")\n\n# Convert to tibble for easier manipulation\nalteris <- as_tibble(alteris)\n```\n:::\n\n\n## Variable Recoding\n\n### Recoding Alter Attributes\n\nNext, we transform the alters' categorical variables to make the analysis easier. We use `factor` to convert variables into factors and `Recode` from the `car` package to relabel the values. This recoding is crucial to:\n\n1. Simplify categories\n2. Handle missing values\n3. Create interpretable groupings\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recode educational level\n# 1 = primary, 2 = secondary, 3 = vocational, 4 = university\nalteris$alter_educ <- factor(Recode(alteris$alter_educ,\n                                   \"1=1;2:3=2;4=3;5=4;-999=NA\"))\n\n# Recode religion\n# 1-5 represent different religious affiliations\nalteris$alter_relig <- factor(Recode(alteris$alter_relig,\n                                    \"1=1;2=2;3=3;4=4;5=5;-999=NA\"))\n\n# Recode political ideology\n# 1-6 represent the political spectrum from left to right\nalteris$alter_ideol <- factor(Recode(alteris$alter_ideol,\n                                    \"1=1;2=2;3=3;4=4;5=5;6=6;-999=NA\"))\n\n# Recode age into age groups\n# 1 = 0-18, 2 = 19-29, 3 = 30-40, 4 = 41-51, 5 = 52-62, 6 = 63+\nalteris$alter_edad <- factor(Recode(alteris$alter_edad,\n                                   \"0:18=1;19:29=2;30:40=3;41:51=4;52:62=5;63:100=6\"))\n\n# Recode sex (1 = male, 2 = female)\nalteris$alter_sexo <- factor(Recode(alteris$alter_sexo,\n                                   \"1=1;2=2\"))\n```\n:::\n\n\n### Preparing Ego Data\n\nWe now create a dataset with information about the egos (respondents). We select variables that mirror the alter attributes so we can make direct comparisons:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Seleccionamos y renombramos variables de ego\negos <- a %>%\n       dplyr::select(.egoID,                # Respondent ID\n                     ego_sexo = m0_sexo,    # Respondent sex\n                     ego_edad = m0_edad,    # Respondent age\n                     ego_ideol = c15,       # Political ideology\n                     ego_educ = m01,        # Educational attainment\n                     ego_relig = m38)       # Religion\n\n# Convert to tibble for easier manipulation\negos <- as_tibble(egos)\n```\n:::\n\n\n### Recoding Ego Variables\n\nAs with the alters, we recode ego variables to ensure comparability:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recode educational level\n# Group into four levels: primary, secondary, vocational, university\negos$ego_educ <- factor(Recode(egos$ego_educ,\n                              \"1:3=1;4:5=2;6:7=3;8:10=4;-999:-888=NA\"))\n\n# Recode religion\n# Group into five main categories\negos$ego_relig <- factor(Recode(egos$ego_relig,\n                               \"1=1;2=2;9=3;7:8=4;3:6=5;-999:-888=NA\"))\n\n# Recode political ideology\n# Scale from 1-6 where 1 = far left and 6 = far right\negos$ego_ideol <- factor(Recode(egos$ego_ideol,\n                               \"9:10=1;6:8=2;5=3;2:4=4;0:1=5;11:12=6;-999:-888=NA\"))\n\n# Recode age into the same groups used for alters\negos$ego_edad <- factor(Recode(egos$ego_edad,\n                              \"18=1;19:29=2;30:40=3;41:51=4;52:62=5;63:100=6\"))\n\n# Recode sex (1 = male, 2 = female)\negos$ego_sexo <- factor(Recode(egos$ego_sexo,\n                              \"1=1;2=2\"))\n```\n:::\n\n\n### Joining Ego and Alter Data\n\nWe combine the ego and alter datasets with a left join, which keeps all alters and their corresponding egos:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Join the datasets using the ego ID as the key\nobs <- left_join(alteris, egos, by = \".egoID\")\n\n# Create a case indicator\nobs$case <- 1\n\n# Recode missing values\nobs[obs == \"-999\"] <- NA\nobs[obs == \"-888\"] <- NA\n```\n:::\n\n\n## Descriptive Analysis\n\n### Descriptives (alter)\n\nWe examine the frequency distribution of the alter attributes.\n\n::: {.cell}\n\n```{.r .cell-code}\nkbl(freq(obs$alter_educ)) %>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1362 </td>\n   <td style=\"text-align:right;\"> 11.0 </td>\n   <td style=\"text-align:right;\"> 17.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3543 </td>\n   <td style=\"text-align:right;\"> 28.7 </td>\n   <td style=\"text-align:right;\"> 46.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1042 </td>\n   <td style=\"text-align:right;\"> 8.4 </td>\n   <td style=\"text-align:right;\"> 13.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4 </td>\n   <td style=\"text-align:right;\"> 1719 </td>\n   <td style=\"text-align:right;\"> 13.9 </td>\n   <td style=\"text-align:right;\"> 22.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 4699 </td>\n   <td style=\"text-align:right;\"> 38.0 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$alter_relig))%>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 4907 </td>\n   <td style=\"text-align:right;\"> 39.7 </td>\n   <td style=\"text-align:right;\"> 60.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1407 </td>\n   <td style=\"text-align:right;\"> 11.4 </td>\n   <td style=\"text-align:right;\"> 17.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1128 </td>\n   <td style=\"text-align:right;\"> 9.1 </td>\n   <td style=\"text-align:right;\"> 14.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4 </td>\n   <td style=\"text-align:right;\"> 251 </td>\n   <td style=\"text-align:right;\"> 2.0 </td>\n   <td style=\"text-align:right;\"> 3.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:right;\"> 373 </td>\n   <td style=\"text-align:right;\"> 3.0 </td>\n   <td style=\"text-align:right;\"> 4.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 4299 </td>\n   <td style=\"text-align:right;\"> 34.8 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$alter_ideol))%>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 786 </td>\n   <td style=\"text-align:right;\"> 6.4 </td>\n   <td style=\"text-align:right;\"> 11.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 191 </td>\n   <td style=\"text-align:right;\"> 1.5 </td>\n   <td style=\"text-align:right;\"> 2.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:right;\"> 382 </td>\n   <td style=\"text-align:right;\"> 3.1 </td>\n   <td style=\"text-align:right;\"> 5.4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4 </td>\n   <td style=\"text-align:right;\"> 303 </td>\n   <td style=\"text-align:right;\"> 2.5 </td>\n   <td style=\"text-align:right;\"> 4.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:right;\"> 759 </td>\n   <td style=\"text-align:right;\"> 6.1 </td>\n   <td style=\"text-align:right;\"> 10.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 6 </td>\n   <td style=\"text-align:right;\"> 4644 </td>\n   <td style=\"text-align:right;\"> 37.6 </td>\n   <td style=\"text-align:right;\"> 65.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 5300 </td>\n   <td style=\"text-align:right;\"> 42.9 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$alter_edad)) %>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 349 </td>\n   <td style=\"text-align:right;\"> 2.8 </td>\n   <td style=\"text-align:right;\"> 4.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1477 </td>\n   <td style=\"text-align:right;\"> 11.9 </td>\n   <td style=\"text-align:right;\"> 18.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1875 </td>\n   <td style=\"text-align:right;\"> 15.2 </td>\n   <td style=\"text-align:right;\"> 23.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4 </td>\n   <td style=\"text-align:right;\"> 1713 </td>\n   <td style=\"text-align:right;\"> 13.9 </td>\n   <td style=\"text-align:right;\"> 21.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1466 </td>\n   <td style=\"text-align:right;\"> 11.9 </td>\n   <td style=\"text-align:right;\"> 18.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 6 </td>\n   <td style=\"text-align:right;\"> 1186 </td>\n   <td style=\"text-align:right;\"> 9.6 </td>\n   <td style=\"text-align:right;\"> 14.7 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 4299 </td>\n   <td style=\"text-align:right;\"> 34.8 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$alter_sexo)) %>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 3388 </td>\n   <td style=\"text-align:right;\"> 27.4 </td>\n   <td style=\"text-align:right;\"> 42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 4678 </td>\n   <td style=\"text-align:right;\"> 37.8 </td>\n   <td style=\"text-align:right;\"> 58 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 4299 </td>\n   <td style=\"text-align:right;\"> 34.8 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Descriptives (ego)\n\nWe review the frequency distribution of the egos' sociodemographic attributes.\n\n::: {.cell}\n\n```{.r .cell-code}\nkbl(freq(obs$ego_educ)) %>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 2985 </td>\n   <td style=\"text-align:right;\"> 24.1 </td>\n   <td style=\"text-align:right;\"> 24.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5225 </td>\n   <td style=\"text-align:right;\"> 42.3 </td>\n   <td style=\"text-align:right;\"> 42.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2010 </td>\n   <td style=\"text-align:right;\"> 16.3 </td>\n   <td style=\"text-align:right;\"> 16.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2145 </td>\n   <td style=\"text-align:right;\"> 17.3 </td>\n   <td style=\"text-align:right;\"> 17.3 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$ego_relig))%>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 6915 </td>\n   <td style=\"text-align:right;\"> 55.9 </td>\n   <td style=\"text-align:right;\"> 56.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 2495 </td>\n   <td style=\"text-align:right;\"> 20.2 </td>\n   <td style=\"text-align:right;\"> 20.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:right;\"> 1055 </td>\n   <td style=\"text-align:right;\"> 8.5 </td>\n   <td style=\"text-align:right;\"> 8.6 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4 </td>\n   <td style=\"text-align:right;\"> 485 </td>\n   <td style=\"text-align:right;\"> 3.9 </td>\n   <td style=\"text-align:right;\"> 3.9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1380 </td>\n   <td style=\"text-align:right;\"> 11.2 </td>\n   <td style=\"text-align:right;\"> 11.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 35 </td>\n   <td style=\"text-align:right;\"> 0.3 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$ego_ideol))%>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n   <td style=\"text-align:right;\"> 915 </td>\n   <td style=\"text-align:right;\"> 7.4 </td>\n   <td style=\"text-align:right;\"> 7.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2 </td>\n   <td style=\"text-align:right;\"> 1090 </td>\n   <td style=\"text-align:right;\"> 8.8 </td>\n   <td style=\"text-align:right;\"> 8.9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 3 </td>\n   <td style=\"text-align:right;\"> 2350 </td>\n   <td style=\"text-align:right;\"> 19.0 </td>\n   <td style=\"text-align:right;\"> 19.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 4 </td>\n   <td style=\"text-align:right;\"> 1380 </td>\n   <td style=\"text-align:right;\"> 11.2 </td>\n   <td style=\"text-align:right;\"> 11.3 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1075 </td>\n   <td style=\"text-align:right;\"> 8.7 </td>\n   <td style=\"text-align:right;\"> 8.8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 6 </td>\n   <td style=\"text-align:right;\"> 5400 </td>\n   <td style=\"text-align:right;\"> 43.7 </td>\n   <td style=\"text-align:right;\"> 44.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> NA </td>\n   <td style=\"text-align:right;\"> 155 </td>\n   <td style=\"text-align:right;\"> 1.3 </td>\n   <td style=\"text-align:right;\"> NA </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$ego_edad)) %>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:right;\"> 0.1 </td>\n   <td style=\"text-align:right;\"> 0.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1865 </td>\n   <td style=\"text-align:right;\"> 15.1 </td>\n   <td style=\"text-align:right;\"> 15.1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2530 </td>\n   <td style=\"text-align:right;\"> 20.5 </td>\n   <td style=\"text-align:right;\"> 20.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2720 </td>\n   <td style=\"text-align:right;\"> 22.0 </td>\n   <td style=\"text-align:right;\"> 22.0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2870 </td>\n   <td style=\"text-align:right;\"> 23.2 </td>\n   <td style=\"text-align:right;\"> 23.2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2370 </td>\n   <td style=\"text-align:right;\"> 19.2 </td>\n   <td style=\"text-align:right;\"> 19.2 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\nkbl(freq(obs$ego_sexo)) %>%kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> % </th>\n   <th style=\"text-align:right;\"> val% </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 4755 </td>\n   <td style=\"text-align:right;\"> 38.5 </td>\n   <td style=\"text-align:right;\"> 38.5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7610 </td>\n   <td style=\"text-align:right;\"> 61.5 </td>\n   <td style=\"text-align:right;\"> 61.5 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nThe tables show the frequency distribution for each sociodemographic characteristic. The columns represent:\n1. The variable category\n2. The absolute frequency (number of cases)\n3. The percentage of the total\n\nThis information helps us understand the composition of the sample at both the ego and alter levels, and it will be essential for subsequent analyses of homophily and social distance.\n\n### Educational Homophily Analysis\n\nWe examine educational homophily with a cross-tabulation of the education levels of egos and alters. We first recode the labels to improve interpretation:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Recode educational labels\nobs <- obs %>%\n  dplyr::mutate(\n    ego_educ = case_when(\n      ego_educ == 1 ~ \"primary\",\n      ego_educ == 2 ~ \"secondary\",\n      ego_educ == 3 ~ \"vocational\",\n      TRUE ~ \"university\"\n    )\n  ) %>%\n  dplyr::mutate(\n    alter_educ = case_when(\n      alter_educ == 1 ~ \"primary\",\n      alter_educ == 2 ~ \"secondary\",\n      alter_educ == 3 ~ \"vocational\",\n      TRUE ~ \"university\"\n    )\n  )\n\n# Creamos tabla cruzada con porcentajes\ntable_cont <- sjPlot::tab_xtab(\n  var.row = obs$ego_educ,\n  var.col = obs$alter_educ,\n  title = \"Educational Homophily in Personal Networks\",\n  show.row.prc = TRUE,\n  show.summary = TRUE,\n  show.col.prc = TRUE,\n  use.viewer = FALSE\n)\ntable_cont\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<caption style=\"font-weight: bold; text-align:left;\">Educational Homophily in Personal Networks</caption>\n <tr>\n <th style=\"border-top:double; text-align:center; font-style:italic; font-weight:normal; border-bottom:1px solid;\" rowspan=\"2\">ego_educ</th>\n <th style=\"border-top:double; text-align:center; font-style:italic; font-weight:normal;\" colspan=\"4\">alter_educ</th>\n <th style=\"border-top:double; text-align:center; font-style:italic; font-weight:normal; font-weight:bolder; font-style:italic; border-bottom:1px solid; \" rowspan=\"2\">Total</th>\n </tr>\n \n<tr>\n <td style=\"border-bottom:1px solid; text-align:center; padding:0.2cm;\">primary</td>\n <td style=\"border-bottom:1px solid; text-align:center; padding:0.2cm;\">secondary</td>\n <td style=\"border-bottom:1px solid; text-align:center; padding:0.2cm;\">university</td>\n <td style=\"border-bottom:1px solid; text-align:center; padding:0.2cm;\">vocational</td>\n </tr>\n \n<tr> \n<td style=\"padding:0.2cm;  text-align:left; vertical-align:middle;\">primary</td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">570</span><br><span style=\"color:#333399;\">19.1&nbsp;&#37;</span><br><span style=\"color:#339933;\">41.9&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">825</span><br><span style=\"color:#333399;\">27.6&nbsp;&#37;</span><br><span style=\"color:#339933;\">23.3&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">1501</span><br><span style=\"color:#333399;\">50.3&nbsp;&#37;</span><br><span style=\"color:#339933;\">23.4&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">89</span><br><span style=\"color:#333399;\">3&nbsp;&#37;</span><br><span style=\"color:#339933;\">8.5&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;  \"><span style=\"color:black;\">2985</span><br><span style=\"color:#333399;\">100&nbsp;&#37;</span><br><span style=\"color:#339933;\">24.1&nbsp;&#37;</span></td> \n</tr>\n \n<tr> \n<td style=\"padding:0.2cm;  text-align:left; vertical-align:middle;\">secondary</td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">622</span><br><span style=\"color:#333399;\">11.9&nbsp;&#37;</span><br><span style=\"color:#339933;\">45.7&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">1881</span><br><span style=\"color:#333399;\">36&nbsp;&#37;</span><br><span style=\"color:#339933;\">53.1&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">2386</span><br><span style=\"color:#333399;\">45.7&nbsp;&#37;</span><br><span style=\"color:#339933;\">37.2&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">336</span><br><span style=\"color:#333399;\">6.4&nbsp;&#37;</span><br><span style=\"color:#339933;\">32.2&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;  \"><span style=\"color:black;\">5225</span><br><span style=\"color:#333399;\">100&nbsp;&#37;</span><br><span style=\"color:#339933;\">42.3&nbsp;&#37;</span></td> \n</tr>\n \n<tr> \n<td style=\"padding:0.2cm;  text-align:left; vertical-align:middle;\">university</td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">54</span><br><span style=\"color:#333399;\">2.5&nbsp;&#37;</span><br><span style=\"color:#339933;\">4&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">356</span><br><span style=\"color:#333399;\">16.6&nbsp;&#37;</span><br><span style=\"color:#339933;\">10&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">1507</span><br><span style=\"color:#333399;\">70.3&nbsp;&#37;</span><br><span style=\"color:#339933;\">23.5&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">228</span><br><span style=\"color:#333399;\">10.6&nbsp;&#37;</span><br><span style=\"color:#339933;\">21.9&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;  \"><span style=\"color:black;\">2145</span><br><span style=\"color:#333399;\">100&nbsp;&#37;</span><br><span style=\"color:#339933;\">17.3&nbsp;&#37;</span></td> \n</tr>\n \n<tr> \n<td style=\"padding:0.2cm;  text-align:left; vertical-align:middle;\">vocational</td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">116</span><br><span style=\"color:#333399;\">5.8&nbsp;&#37;</span><br><span style=\"color:#339933;\">8.5&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">481</span><br><span style=\"color:#333399;\">23.9&nbsp;&#37;</span><br><span style=\"color:#339933;\">13.6&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">1024</span><br><span style=\"color:#333399;\">50.9&nbsp;&#37;</span><br><span style=\"color:#339933;\">16&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center; \"><span style=\"color:black;\">389</span><br><span style=\"color:#333399;\">19.4&nbsp;&#37;</span><br><span style=\"color:#339933;\">37.3&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;  \"><span style=\"color:black;\">2010</span><br><span style=\"color:#333399;\">100&nbsp;&#37;</span><br><span style=\"color:#339933;\">16.3&nbsp;&#37;</span></td> \n</tr>\n \n<tr> \n<td style=\"padding:0.2cm;  border-bottom:double; font-weight:bolder; font-style:italic; text-align:left; vertical-align:middle;\">Total</td>\n<td style=\"padding:0.2cm; text-align:center;   border-bottom:double;\"><span style=\"color:black;\">1362</span><br><span style=\"color:#333399;\">11&nbsp;&#37;</span><br><span style=\"color:#339933;\">100&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;   border-bottom:double;\"><span style=\"color:black;\">3543</span><br><span style=\"color:#333399;\">28.7&nbsp;&#37;</span><br><span style=\"color:#339933;\">100&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;   border-bottom:double;\"><span style=\"color:black;\">6418</span><br><span style=\"color:#333399;\">51.9&nbsp;&#37;</span><br><span style=\"color:#339933;\">100&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;   border-bottom:double;\"><span style=\"color:black;\">1042</span><br><span style=\"color:#333399;\">8.4&nbsp;&#37;</span><br><span style=\"color:#339933;\">100&nbsp;&#37;</span></td>\n<td style=\"padding:0.2cm; text-align:center;   border-bottom:double;\"><span style=\"color:black;\">12365</span><br><span style=\"color:#333399;\">100&nbsp;&#37;</span><br><span style=\"color:#339933;\">100&nbsp;&#37;</span></td> \n</tr>\n<td style=\"text-align:right; font-size:0.9em; font-style:italic; padding:0.2cm;\" colspan=\"6\">&chi;<sup>2</sup>=1202.528 &middot; df=9 &middot; Cramer's V=0.180 &middot; p=0.000</td> \n</tr>\n \n</table>\n`````\n:::\n:::\n\n\n### Visualizing Educational Homophily\n\nWe create a heatmap to show educational homophily patterns:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Prepare data for the heatmap\ntable <- as.data.frame(prop.table(table(obs$ego_educ, obs$alter_educ)))\ncolnames(table) <- c(\"Ego_educ\", \"Alter_educ\", \"Prop\")\n\n# Format the proportions to display percentages with two decimals\ntable$tooltip_text <- sprintf(\n  \"Ego: %s<br>Alter: %s<br>Share: %.2f%%\",\n  table$Ego_educ,\n  table$Alter_educ,\n  table$Prop * 100\n)\n\n# Create the heatmap\np <- ggplot(table, aes(Ego_educ, Alter_educ)) +\n  geom_tile(aes(fill = Prop, text = tooltip_text)) +  # Add tooltip text\n  scale_fill_gradient(low = \"white\", high = \"black\") +\n  theme_minimal() +\n  labs(\n    title = \"Educational Homophily Heatmap\",\n    x = \"Ego Educational Level\",\n    y = \"Alter Educational Level\",\n    fill = \"Proportion\"\n  )\n\n# Convert to plotly and specify which variables to display in the tooltip\nggplotly(p, tooltip = \"text\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-44d8cbb00bd5f95f9058\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-44d8cbb00bd5f95f9058\">{\"x\":{\"data\":[{\"x\":[1,2,3,4],\"y\":[1,2,3,4],\"z\":[[0.22126929674099488,0.24356775300171526,0,0.026586620926243566],[0.33061749571183535,0.78344768439108059,0.12950257289879932,0.18310463121783876],[0.6204974271012007,1,0.62307032590051459,0.41595197255574617],[0.015008576329331046,0.120926243567753,0.074614065180102912,0.14365351629502573]],\"text\":[[\"Ego: primary<br>Alter: primary<br>Share: 4.61%\",\"Ego: secondary<br>Alter: primary<br>Share: 5.03%\",\"Ego: university<br>Alter: primary<br>Share: 0.44%\",\"Ego: vocational<br>Alter: primary<br>Share: 0.94%\"],[\"Ego: primary<br>Alter: secondary<br>Share: 6.67%\",\"Ego: secondary<br>Alter: secondary<br>Share: 15.21%\",\"Ego: university<br>Alter: secondary<br>Share: 2.88%\",\"Ego: vocational<br>Alter: secondary<br>Share: 3.89%\"],[\"Ego: primary<br>Alter: university<br>Share: 12.14%\",\"Ego: secondary<br>Alter: university<br>Share: 19.30%\",\"Ego: university<br>Alter: university<br>Share: 12.19%\",\"Ego: vocational<br>Alter: university<br>Share: 8.28%\"],[\"Ego: primary<br>Alter: vocational<br>Share: 0.72%\",\"Ego: secondary<br>Alter: vocational<br>Share: 2.72%\",\"Ego: university<br>Alter: vocational<br>Share: 1.84%\",\"Ego: vocational<br>Alter: vocational<br>Share: 3.15%\"]],\"colorscale\":[[0,\"#FFFFFF\"],[0.015008576329331046,\"#FBFBFB\"],[0.026586620926243566,\"#F7F7F7\"],[0.074614065180102912,\"#EAEAEA\"],[0.120926243567753,\"#DCDCDC\"],[0.12950257289879932,\"#DADADA\"],[0.14365351629502573,\"#D6D6D6\"],[0.18310463121783876,\"#CBCBCB\"],[0.22126929674099488,\"#C0C0C0\"],[0.24356775300171526,\"#BABABA\"],[0.33061749571183535,\"#A3A3A3\"],[0.41595197255574617,\"#8C8C8C\"],[0.6204974271012007,\"#595959\"],[0.62307032590051459,\"#595959\"],[0.78344768439108059,\"#343434\"],[1,\"#000000\"]],\"type\":\"heatmap\",\"showscale\":false,\"autocolorscale\":false,\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1],\"y\":[1],\"name\":\"5d1be3350e7d21878f3685da40a178a2\",\"type\":\"scatter\",\"mode\":\"markers\",\"opacity\":0,\"hoverinfo\":\"skip\",\"showlegend\":false,\"marker\":{\"color\":[0,1],\"colorscale\":[[0,\"#FFFFFF\"],[0.0033444816053511683,\"#FEFEFE\"],[0.0066889632107023419,\"#FDFDFD\"],[0.010033444816053515,\"#FCFCFC\"],[0.013377926421404684,\"#FBFBFB\"],[0.016722408026755852,\"#FAFAFA\"],[0.020066889632107031,\"#F9F9F9\"],[0.023411371237458199,\"#F8F8F8\"],[0.026755852842809368,\"#F7F7F7\"],[0.030100334448160536,\"#F6F6F6\"],[0.033444816053511704,\"#F5F5F5\"],[0.03678929765886288,\"#F4F4F4\"],[0.040133779264214048,\"#F3F3F3\"],[0.043478260869565216,\"#F2F2F2\"],[0.046822742474916398,\"#F1F1F1\"],[0.050167224080267567,\"#F1F1F1\"],[0.053511705685618735,\"#F0F0F0\"],[0.056856187290969903,\"#EFEFEF\"],[0.060200668896321072,\"#EEEEEE\"],[0.063545150501672254,\"#EDEDED\"],[0.066889632107023408,\"#ECECEC\"],[0.070234113712374591,\"#EBEBEB\"],[0.073578595317725759,\"#EAEAEA\"],[0.076923076923076941,\"#E9E9E9\"],[0.080267558528428096,\"#E8E8E8\"],[0.083612040133779278,\"#E7E7E7\"],[0.086956521739130432,\"#E6E6E6\"],[0.090301003344481615,\"#E5E5E5\"],[0.093645484949832797,\"#E4E4E4\"],[0.096989966555183951,\"#E3E3E3\"],[0.10033444816053513,\"#E2E2E2\"],[0.10367892976588629,\"#E1E1E1\"],[0.10702341137123747,\"#E0E0E0\"],[0.11036789297658864,\"#DFDFDF\"],[0.11371237458193981,\"#DEDEDE\"],[0.11705685618729098,\"#DEDEDE\"],[0.12040133779264214,\"#DDDDDD\"],[0.12374581939799331,\"#DCDCDC\"],[0.12709030100334451,\"#DBDBDB\"],[0.13043478260869565,\"#DADADA\"],[0.13377926421404684,\"#D9D9D9\"],[0.13712374581939801,\"#D8D8D8\"],[0.14046822742474918,\"#D7D7D7\"],[0.14381270903010035,\"#D6D6D6\"],[0.14715719063545152,\"#D5D5D5\"],[0.15050167224080271,\"#D4D4D4\"],[0.15384615384615388,\"#D3D3D3\"],[0.15719063545150502,\"#D2D2D2\"],[0.16053511705685619,\"#D1D1D1\"],[0.16387959866220739,\"#D0D0D0\"],[0.16722408026755856,\"#CFCFCF\"],[0.1705685618729097,\"#CECECE\"],[0.17391304347826086,\"#CECECE\"],[0.17725752508361206,\"#CDCDCD\"],[0.18060200668896323,\"#CCCCCC\"],[0.1839464882943144,\"#CBCBCB\"],[0.18729096989966559,\"#CACACA\"],[0.19063545150501673,\"#C9C9C9\"],[0.1939799331103679,\"#C8C8C8\"],[0.19732441471571907,\"#C7C7C7\"],[0.20066889632107027,\"#C6C6C6\"],[0.20401337792642144,\"#C5C5C5\"],[0.20735785953177258,\"#C4C4C4\"],[0.21070234113712374,\"#C3C3C3\"],[0.21404682274247494,\"#C2C2C2\"],[0.21739130434782611,\"#C2C2C2\"],[0.22073578595317728,\"#C1C1C1\"],[0.22408026755852842,\"#C0C0C0\"],[0.22742474916387961,\"#BFBFBF\"],[0.23076923076923078,\"#BEBEBE\"],[0.23411371237458195,\"#BDBDBD\"],[0.23745819397993315,\"#BCBCBC\"],[0.24080267558528429,\"#BBBBBB\"],[0.24414715719063546,\"#BABABA\"],[0.24749163879598662,\"#B9B9B9\"],[0.25083612040133779,\"#B8B8B8\"],[0.25418060200668902,\"#B7B7B7\"],[0.25752508361204018,\"#B7B7B7\"],[0.2608695652173913,\"#B6B6B6\"],[0.26421404682274247,\"#B5B5B5\"],[0.26755852842809369,\"#B4B4B4\"],[0.27090301003344486,\"#B3B3B3\"],[0.27424749163879603,\"#B2B2B2\"],[0.27759197324414714,\"#B1B1B1\"],[0.28093645484949836,\"#B0B0B0\"],[0.28428093645484953,\"#AFAFAF\"],[0.2876254180602007,\"#AEAEAE\"],[0.29096989966555187,\"#ADADAD\"],[0.29431438127090304,\"#ADADAD\"],[0.2976588628762542,\"#ACACAC\"],[0.30100334448160537,\"#ABABAB\"],[0.30434782608695654,\"#AAAAAA\"],[0.30769230769230771,\"#A9A9A9\"],[0.31103678929765893,\"#A8A8A8\"],[0.31438127090301005,\"#A7A7A7\"],[0.31772575250836121,\"#A6A6A6\"],[0.32107023411371238,\"#A5A5A5\"],[0.32441471571906355,\"#A5A5A5\"],[0.32775919732441477,\"#A4A4A4\"],[0.33110367892976583,\"#A3A3A3\"],[0.33444816053511711,\"#A2A2A2\"],[0.33779264214046828,\"#A1A1A1\"],[0.34113712374581939,\"#A0A0A0\"],[0.34448160535117056,\"#9F9F9F\"],[0.34782608695652173,\"#9E9E9E\"],[0.3511705685618729,\"#9D9D9D\"],[0.35451505016722412,\"#9D9D9D\"],[0.35785953177257529,\"#9C9C9C\"],[0.36120401337792646,\"#9B9B9B\"],[0.36454849498327763,\"#9A9A9A\"],[0.3678929765886288,\"#999999\"],[0.37123745819397996,\"#989898\"],[0.37458193979933119,\"#979797\"],[0.37792642140468224,\"#969696\"],[0.38127090301003347,\"#959595\"],[0.38461538461538464,\"#959595\"],[0.38795986622073581,\"#949494\"],[0.39130434782608697,\"#939393\"],[0.39464882943143814,\"#929292\"],[0.39799331103678931,\"#919191\"],[0.40133779264214053,\"#909090\"],[0.4046822742474917,\"#8F8F8F\"],[0.40802675585284287,\"#8E8E8E\"],[0.41137123745819398,\"#8E8E8E\"],[0.41471571906354515,\"#8D8D8D\"],[0.41806020066889632,\"#8C8C8C\"],[0.42140468227424749,\"#8B8B8B\"],[0.42474916387959871,\"#8A8A8A\"],[0.42809364548494988,\"#898989\"],[0.43143812709030105,\"#888888\"],[0.43478260869565222,\"#888888\"],[0.43812709030100339,\"#878787\"],[0.44147157190635455,\"#868686\"],[0.44481605351170578,\"#858585\"],[0.44816053511705684,\"#848484\"],[0.45150501672240806,\"#838383\"],[0.45484949832775923,\"#828282\"],[0.4581939799331104,\"#828282\"],[0.46153846153846156,\"#818181\"],[0.46488294314381273,\"#808080\"],[0.4682274247491639,\"#7F7F7F\"],[0.47157190635451512,\"#7E7E7E\"],[0.47491638795986629,\"#7D7D7D\"],[0.47826086956521746,\"#7C7C7C\"],[0.48160535117056857,\"#7C7C7C\"],[0.48494983277591974,\"#7B7B7B\"],[0.48829431438127091,\"#7A7A7A\"],[0.49163879598662208,\"#797979\"],[0.49498327759197325,\"#787878\"],[0.49832775919732447,\"#777777\"],[0.50167224080267558,\"#767676\"],[0.50501672240802675,\"#767676\"],[0.50836120401337803,\"#757575\"],[0.5117056856187292,\"#747474\"],[0.51505016722408037,\"#737373\"],[0.51839464882943143,\"#727272\"],[0.52173913043478259,\"#717171\"],[0.52508361204013376,\"#717171\"],[0.52842809364548493,\"#707070\"],[0.5317725752508361,\"#6F6F6F\"],[0.53511705685618738,\"#6E6E6E\"],[0.53846153846153855,\"#6D6D6D\"],[0.54180602006688972,\"#6C6C6C\"],[0.54515050167224088,\"#6C6C6C\"],[0.54849498327759205,\"#6B6B6B\"],[0.55183946488294322,\"#6A6A6A\"],[0.55518394648829428,\"#696969\"],[0.55852842809364545,\"#686868\"],[0.56187290969899673,\"#686868\"],[0.56521739130434789,\"#676767\"],[0.56856187290969906,\"#666666\"],[0.57190635451505023,\"#656565\"],[0.5752508361204014,\"#646464\"],[0.57859531772575257,\"#636363\"],[0.58193979933110374,\"#636363\"],[0.5852842809364549,\"#626262\"],[0.58862876254180607,\"#616161\"],[0.59197324414715724,\"#606060\"],[0.59531772575250841,\"#5F5F5F\"],[0.59866220735785958,\"#5F5F5F\"],[0.60200668896321075,\"#5E5E5E\"],[0.60535117056856191,\"#5D5D5D\"],[0.60869565217391308,\"#5C5C5C\"],[0.61204013377926425,\"#5B5B5B\"],[0.61538461538461542,\"#5B5B5B\"],[0.61872909698996659,\"#5A5A5A\"],[0.62207357859531776,\"#595959\"],[0.62541806020066892,\"#585858\"],[0.62876254180602009,\"#575757\"],[0.63210702341137126,\"#575757\"],[0.63545150501672243,\"#565656\"],[0.6387959866220736,\"#555555\"],[0.64214046822742477,\"#545454\"],[0.64548494983277593,\"#535353\"],[0.64882943143812721,\"#535353\"],[0.65217391304347838,\"#525252\"],[0.65551839464882944,\"#515151\"],[0.65886287625418072,\"#505050\"],[0.66220735785953178,\"#4F4F4F\"],[0.66555183946488283,\"#4F4F4F\"],[0.66889632107023411,\"#4E4E4E\"],[0.67224080267558528,\"#4D4D4D\"],[0.67558528428093656,\"#4C4C4C\"],[0.67892976588628751,\"#4C4C4C\"],[0.68227424749163879,\"#4B4B4B\"],[0.68561872909699006,\"#4A4A4A\"],[0.68896321070234101,\"#494949\"],[0.69230769230769229,\"#484848\"],[0.69565217391304346,\"#484848\"],[0.69899665551839474,\"#474747\"],[0.70234113712374568,\"#464646\"],[0.70568561872909696,\"#454545\"],[0.70903010033444824,\"#454545\"],[0.71237458193979941,\"#444444\"],[0.71571906354515036,\"#434343\"],[0.71906354515050164,\"#424242\"],[0.72240802675585292,\"#424242\"],[0.72575250836120386,\"#414141\"],[0.72909698996655514,\"#404040\"],[0.73244147157190642,\"#3F3F3F\"],[0.73578595317725759,\"#3E3E3E\"],[0.73913043478260854,\"#3E3E3E\"],[0.74247491638795982,\"#3D3D3D\"],[0.7458193979933111,\"#3C3C3C\"],[0.74916387959866237,\"#3B3B3B\"],[0.75250836120401332,\"#3B3B3B\"],[0.75585284280936449,\"#3A3A3A\"],[0.75919732441471577,\"#393939\"],[0.76254180602006671,\"#383838\"],[0.76588628762541799,\"#383838\"],[0.76923076923076927,\"#373737\"],[0.77257525083612055,\"#363636\"],[0.7759197324414715,\"#363636\"],[0.77926421404682267,\"#353535\"],[0.78260869565217395,\"#343434\"],[0.78595317725752489,\"#333333\"],[0.78929765886287617,\"#333333\"],[0.79264214046822745,\"#323232\"],[0.79598662207357862,\"#313131\"],[0.79933110367892968,\"#303030\"],[0.80267558528428085,\"#303030\"],[0.80602006688963213,\"#2F2F2F\"],[0.8093645484949834,\"#2E2E2E\"],[0.81270903010033435,\"#2E2E2E\"],[0.81605351170568563,\"#2D2D2D\"],[0.8193979933110368,\"#2C2C2C\"],[0.82274247491638786,\"#2B2B2B\"],[0.82608695652173902,\"#2B2B2B\"],[0.8294314381270903,\"#2A2A2A\"],[0.83277591973244158,\"#292929\"],[0.83612040133779253,\"#292929\"],[0.83946488294314381,\"#282828\"],[0.84280936454849498,\"#272727\"],[0.84615384615384626,\"#262626\"],[0.8494983277591972,\"#262626\"],[0.85284280936454848,\"#252525\"],[0.85618729096989976,\"#242424\"],[0.85953177257525071,\"#242424\"],[0.86287625418060199,\"#232323\"],[0.86622073578595316,\"#222222\"],[0.86956521739130443,\"#222222\"],[0.87290969899665538,\"#212121\"],[0.87625418060200666,\"#202020\"],[0.87959866220735794,\"#202020\"],[0.88294314381270911,\"#1F1F1F\"],[0.88628762541806005,\"#1E1E1E\"],[0.88963210702341133,\"#1E1E1E\"],[0.89297658862876261,\"#1D1D1D\"],[0.89632107023411356,\"#1C1C1C\"],[0.89966555183946484,\"#1C1C1C\"],[0.90301003344481612,\"#1B1B1B\"],[0.90635451505016729,\"#1A1A1A\"],[0.90969899665551823,\"#1A1A1A\"],[0.91304347826086951,\"#191919\"],[0.91638795986622079,\"#181818\"],[0.91973244147157207,\"#181818\"],[0.92307692307692302,\"#171717\"],[0.92642140468227419,\"#161616\"],[0.92976588628762546,\"#161616\"],[0.93311036789297641,\"#151515\"],[0.93645484949832769,\"#141414\"],[0.93979933110367897,\"#131313\"],[0.94314381270903025,\"#131313\"],[0.9464882943143812,\"#121212\"],[0.94983277591973236,\"#111111\"],[0.95317725752508364,\"#101010\"],[0.95652173913043492,\"#0F0F0F\"],[0.95986622073578587,\"#0E0E0E\"],[0.96321070234113715,\"#0D0D0D\"],[0.96655518394648832,\"#0C0C0C\"],[0.96989966555183937,\"#0B0B0B\"],[0.97324414715719054,\"#0A0A0A\"],[0.97658862876254182,\"#090909\"],[0.9799331103678931,\"#070707\"],[0.98327759197324405,\"#060606\"],[0.98662207357859533,\"#050505\"],[0.98996655518394649,\"#040404\"],[0.99331103678929777,\"#020202\"],[0.99665551839464872,\"#010101\"],[1,\"#000000\"]],\"colorbar\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"thickness\":23.039999999999996,\"title\":\"Proportion\",\"titlefont\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"tickmode\":\"array\",\"ticktext\":[\"0.05\",\"0.10\",\"0.15\"],\"tickvals\":[0.24281982561463697,0.50705188679245294,0.77128394797026867],\"tickfont\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"ticklen\":2,\"len\":0.5}},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.762557077625573,\"r\":7.3059360730593621,\"b\":40.182648401826491,\"l\":84.018264840182667},\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"title\":{\"text\":\"Educational Homophily Heatmap\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.534246575342465},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,4.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"primary\",\"secondary\",\"university\",\"vocational\"],\"tickvals\":[1,2,3,4],\"categoryorder\":\"array\",\"categoryarray\":[\"primary\",\"secondary\",\"university\",\"vocational\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Ego Educational Level\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.40000000000000002,4.5999999999999996],\"tickmode\":\"array\",\"ticktext\":[\"primary\",\"secondary\",\"university\",\"vocational\"],\"tickvals\":[1,2,3,4],\"categoryorder\":\"array\",\"categoryarray\":[\"primary\",\"secondary\",\"university\",\"vocational\"],\"nticks\":null,\"ticks\":\"\",\"tickcolor\":null,\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(235,235,235,1)\",\"gridwidth\":0.66417600664176002,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Alter Educational Level\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":null,\"bordercolor\":null,\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"Proportion\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"264d76f5cbf94\":{\"x\":{},\"y\":{},\"fill\":{},\"text\":{},\"type\":\"heatmap\"}},\"cur_data\":\"264d76f5cbf94\",\"visdat\":{\"264d76f5cbf94\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n### Relationship Analysis by Type\n\nWe calculate average relationship duration by tie type:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nobs %>%\n  summarise(\n    mean.clo.esp = mean(alter_tiempo[alter_rel == \"1\"], na.rm = TRUE),\n    mean.clo.hijo = mean(alter_tiempo[alter_rel == \"2\"], na.rm = TRUE),\n    mean.clo.pari = mean(alter_tiempo[alter_rel == \"3\"], na.rm = TRUE),\n    mean.clo.amig = mean(alter_tiempo[alter_rel == \"4\"], na.rm = TRUE),\n    mean.clo.otro = mean(alter_tiempo[alter_rel == \"5\"], na.rm = TRUE),\n    count.par.barr = sum((alter_rel == \"3\" & alter_barrio == \"1\"), na.rm = TRUE)\n  ) %>%\n  kbl() %>%\n  kable_paper()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> mean.clo.esp </th>\n   <th style=\"text-align:right;\"> mean.clo.hijo </th>\n   <th style=\"text-align:right;\"> mean.clo.pari </th>\n   <th style=\"text-align:right;\"> mean.clo.amig </th>\n   <th style=\"text-align:right;\"> mean.clo.otro </th>\n   <th style=\"text-align:right;\"> count.par.barr </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 4.498406 </td>\n   <td style=\"text-align:right;\"> 4.91511 </td>\n   <td style=\"text-align:right;\"> 4.877932 </td>\n   <td style=\"text-align:right;\"> 4.075097 </td>\n   <td style=\"text-align:right;\"> 3.67823 </td>\n   <td style=\"text-align:right;\"> 1215 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Calculating Sociodemographic Distances\n\n### Creating Distance Vectors\n\nWe compute sociodemographic distance measures between each ego and alter. A value of 1 indicates a difference in the attribute:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate distances for each dimension\nobs$sexo_dist <- ifelse(obs$alter_sexo == obs$ego_sexo, 0, 1)\nobs$edad_dist <- ifelse(obs$alter_edad == obs$ego_edad, 0, 1)\nobs$educ_dist <- ifelse(obs$alter_educ == obs$ego_educ, 0, 1)\nobs$ideol_dist <- ifelse(obs$alter_ideol == obs$ego_ideol, 0, 1)\nobs$relig_dist <- ifelse(obs$alter_relig == obs$ego_relig, 0, 1)\n```\n:::\n\n\n### Distance Summary\n\nFinally, we present a summary of the sociodemographic distances:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a summary table of distances\nkbl(egltable(\n  c(\"sexo_dist\", \"edad_dist\", \"educ_dist\", \"ideol_dist\", \"relig_dist\"),\n  data = obs,\n  strict = TRUE\n)) %>%\n  kable_paper() \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">  </th>\n   <th style=\"text-align:left;\"> M (SD) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> sexo_dist </td>\n   <td style=\"text-align:left;\"> 0.36 (0.48) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> edad_dist </td>\n   <td style=\"text-align:left;\"> 0.65 (0.48) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> educ_dist </td>\n   <td style=\"text-align:left;\"> 0.65 (0.48) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ideol_dist </td>\n   <td style=\"text-align:left;\"> 0.55 (0.50) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> relig_dist </td>\n   <td style=\"text-align:left;\"> 0.38 (0.49) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nThis final table shows the percentage of ego–alter dyads that differ in each sociodemographic dimension, allowing us to assess homophily patterns across characteristics.\n\n\n# References\n\n- Bargsted Valdés, M. A., Espinoza, V., & Plaza, A. (2020). Homophily Patterns in Chile. Papers. Revista de Sociologia, 105(4), 583. https://doi.org/10.5565/rev/papers.2617\n\n- Smith, J. A., McPherson, M., & Smith-Lovin, L. (2014). Social Distance in the United States: Sex, Race, Religion, Age, and Education Homophily among Confidants, 1985 to 2004. American Sociological Review, 79(3), 432–456. https://doi.org/10.1177/0003122414531776\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../../site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"../../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}